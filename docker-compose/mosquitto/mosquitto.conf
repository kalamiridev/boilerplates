# Basic listener configuration
listener 1883
allow_anonymous false
password_file /mosquitto/config/passwd

# TLS/SSL configuration
listener 8883
cafile /mosquitto/certs/fullchain1.pem
certfile /mosquitto/certs/cert1.pem
keyfile /mosquitto/certs/privkey1.pem

# Persistence
persistence true
persistence_location /mosquitto/data/
# Save to disk every 300 seconds
autosave_interval 300
# Keep messages for offline clients
persistent_client_expiration 1d

# Log to file and stdout
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
# Choose what to log
log_type error
log_type warning
log_type notice
log_type information
log_type debug
# Log connection details
connection_messages true
log_timestamp true