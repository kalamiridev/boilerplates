---
volumes:
  data:
    name: podfetch_data
services:
  app:
    image: samuel19982/podfetch:latest
    container_name: podfetch
    ports:
      - 4135:8000
    volumes:
      - data:/app/podcasts:rw
    environment:
      - POLLING_INTERVAL=300
      - SERVER_URL=http://localhost:80
      - DATABASE_URL=jdbc:postgresql://${DATABASE_URL}/podfetch?user=${DATABASE_USER}&password=${DATABASE_PASS}
      - GPODDER_INTEGRATION_ENABLED=true
      - BASIC_AUTH=true
      - USERNAME=${USERNAME}
      - PASSWORD=${PASSWORD}
    security_opt:
      - apparmor:unconfined
    restart: unless-stopped
